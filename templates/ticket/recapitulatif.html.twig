{% extends 'base.html.twig' %}


{% block body %}
<h1> Recapitulatif de la commande </h1>
<h3> N° de reservation {{ reservation.id }} </h3>
<h3> Visite le {{ reservation.reservationDate|date('d/m/Y') }} </h3>
</h2>
<div class="bloc">
    {% for ticket in reservation.tickets %}
        <h4>  Billet x<button class="btn"> Modifier </button>
                <button class="btn"> Supprimer </button></h4>
        
        <div class="row box">
            
            <div class="col-sm">
                <div> Prénom  :  {{ ticket.firstName }}</div>
                <div> Nom  : {{ ticket.lastName }} </div>
                <div> Date de naissance  : {{ ticket.birthDay|date('d/m/Y') }} </div>
                <div> Address mail  : {{ ticket.emailAddress}} </div> 
            </div>

            <div class="col-sm">
                <div>
                Tarif :   {{ typeName }} </div>
                <div>   Type de Billet : {{ dayOrHalfDay }}</div>
                <div>Prix :    {{ ticket.price }}€</div>
            </div>
        </div>

    {% endfor %}
</div>
<div class="bloc">
    <h3> Total </h3>
    <div class="box">
        <h4> Nombre de billets : {{amountOfTickets}} </h4>
        <h4> Prix total : {{totalPrice}}€</h4>   
    </div>    
    <div class="row justify-content-md-center"> 
    <form action="/paiement" method="POST">
    <script
        src="https://checkout.stripe.com/checkout.js" class="stripe-button"
        data-key="pk_test_KK2i0mkrYlpFPfBlE2n6CYEL"
        data-amount={{totalPrice*100}}
        data-name="Carte de paiement"
        data-description={{totalPrice}} €
        {#data-image="https://stripe.com/img/documentation/checkout/marketplace.png"#}
        data-locale="auto"
        data-currency="eur">
    </script>
    </form> 
    </div>
</div>
{% endblock %}